<app-generic-page pageTitle="Exam Management">
  <ng-container buttons>
    <dx-button text="Add New" [icon]="dxButtonConfig.add_icon" [type]="dxButtonConfig.add_type" (onClick)="addExam()"></dx-button>
    <dx-button text="Refresh" icon="refresh" (onClick)="loadExams()"></dx-button>
  </ng-container>
  <ng-container body>
    <div class="container-fluid">
      <!-- DataGrid -->
      <div class="row">
        <div class="col">
          <dx-data-grid
            id="examsGrid"
            [dataSource]="exams"
            [showBorders]="true"
            [columnAutoWidth]="true"
            [allowColumnResizing]="true"
            [allowColumnReordering]="true"
            [showRowLines]="true"
            [rowAlternationEnabled]="true"
            [hoverStateEnabled]="true"
            [height]="'calc(100vh - 220px)'"
          >
            <!-- Pagination configuration -->
            <dxo-paging [pageSize]="gridConfig.pageSize"></dxo-paging>
            <dxo-pager
              [showPageSizeSelector]="true"
              [allowedPageSizes]="gridConfig.allowedPageSizes"
              [showInfo]="true"
              [showNavigationButtons]="true"
            ></dxo-pager>

            <!-- Search configuration -->
            <dxo-search-panel
              [visible]="true"
              [width]="240"
              placeholder="Search..."
            ></dxo-search-panel>

            <!-- Filter configuration -->
            <dxo-filter-row [visible]="true"></dxo-filter-row>
            <dxo-header-filter [visible]="true"></dxo-header-filter>

            <!-- Column configuration -->
            <dxi-column dataField="Id" caption="ID" [width]="70" [allowFiltering]="true" [allowSorting]="true" cssClass="vertical-center"></dxi-column>
            <dxi-column cellTemplate="cellTitle" caption="Title" [allowFiltering]="true" [allowSorting]="true" cssClass="vertical-center"></dxi-column>
            <dxi-column dataField="Description" caption="Description" [allowFiltering]="true" [allowSorting]="true" cssClass="vertical-center"></dxi-column>
            <dxi-column dataField="Duration_Minutes" caption="Duration (minutes)" [width]="120" [allowFiltering]="true" [allowSorting]="true" cssClass="vertical-center"></dxi-column>
            <dxi-column dataField="Total_Questions" caption="Question Count" [width]="100" [allowFiltering]="true" [allowSorting]="true" cssClass="vertical-center"></dxi-column>
            <dxi-column dataField="Created_At" caption="Created Date" dataType="date" format="dd/MM/yyyy HH:mm" [width]="150" [allowFiltering]="true" [allowSorting]="true" cssClass="vertical-center"></dxi-column>
            <dxi-column dataField="Updated_At" caption="Updated Date" dataType="date" format="dd/MM/yyyy HH:mm" [width]="150" [allowFiltering]="true" [allowSorting]="true" cssClass="vertical-center"></dxi-column>
            <dxi-column dataField="Create_User_Name" caption="Create User" [width]="150" [allowFiltering]="true" [allowSorting]="true" cssClass="vertical-center"></dxi-column>
            <dxi-column cellTemplate="cellAction" caption="Action" [width]="60" cssClass="vertical-center"></dxi-column>

            <div *dxTemplate="let row of 'cellTitle'" class="text-left kehoach-container">
              <a [routerLink]="['/administration/exams/detail']" [queryParams]="{id: row.data.Id}">{{ row.data.Title }}</a>
            </div>
            <div *dxTemplate="let row of 'cellAction'" class="d-flex justify-content-around">
              <a class="fa fa-edit" style="cursor: pointer; color: #007bff;" (click)="editExam(row.data)"></a>
              <a class="fa fa-trash" style="cursor: pointer; color: #dc3545;" (click)="deleteExam(row.data)"></a>
            </div>

            <!-- Loading configuration -->
            <dxo-load-panel [enabled]="true"></dxo-load-panel>
          </dx-data-grid>
        </div>
      </div>
    </div>
  </ng-container>
</app-generic-page>
